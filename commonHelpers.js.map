{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryRef = document.querySelector('.gallery');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nexport function renderGallery(data) {\n  galleryRef.innerHTML = data.map(getGalleryItemMarkup).join('');\n  gallery.refresh();\n}\n\nfunction getGalleryItemMarkup({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  loading=\"lazy\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                />\n                <span class=\"gallery-info-bar\">\n                    <span class=\"gallery-info\">\n                        <span class=\"gallery-info-label\">Likes</span>\n                        <span class=\"gallery-info-value\">${likes}</span>\n                    </span>\n                    <span class=\"gallery-info\">\n                        <span class=\"gallery-info-label\">Views</span>\n                        <span class=\"gallery-info-value\">${views}</span>\n                    </span>\n                    <span class=\"gallery-info\">\n                        <span class=\"gallery-info-label\">Comments</span>\n                        <span class=\"gallery-info-value\">${comments}</span>\n                    </span>\n                    <span class=\"gallery-info\">\n                        <span class=\"gallery-info-label\">Downloads</span>\n                        <span class=\"gallery-info-value\">${downloads}</span>\n                    </span>\n                </span>\n            </a>\n        </li>\n    `;\n}\n\nconst progressBarRef = document.querySelector('.progress-bar');\n\nexport function toggleProgressBar(show) {\n  if (show) {\n    progressBarRef.classList.add('progress-bar--show');\n  } else {\n    progressBarRef.classList.remove('progress-bar--show');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderGallery, toggleProgressBar } from './render-functions';\n\nconst notify = {\n  error(message) {\n    iziToast.error({\n      position: 'topRight',\n      message,\n    });\n  },\n};\n\nconst { VITE_API_KEY } = import.meta.env;\n\nclass PixabayApi {\n  #API_URL = 'https://pixabay.com/api/';\n  #BASE_SEARCH_PARAMS = {\n    key: VITE_API_KEY,\n    q: '',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  fetchPhotos({\n    searchValue = '',\n    startCallback = null,\n    finallyCallback = null,\n  }) {\n    this.#validateSearchValue(searchValue);\n\n    const serachParams = new URLSearchParams({\n      ...this.#BASE_SEARCH_PARAMS,\n      q: searchValue,\n    });\n\n    startCallback?.();\n    toggleProgressBar(true);\n\n    fetch(`${this.#API_URL}?${serachParams}`, {\n      method: 'GET',\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(res.status);\n        }\n        return res.json();\n      })\n      .then(data => {\n        if (!data.hits?.length) {\n          notify.error(\n            'Sorry, there are no images matching your search query. Please try again!'\n          );\n        }\n\n        renderGallery(data.hits ?? []);\n      })\n      .catch(err => {\n        notify.error(err?.message ?? 'Something went wrong');\n      })\n      .finally(() => {\n        finallyCallback?.();\n        toggleProgressBar(false);\n      });\n  }\n\n  #validateSearchValue(searchValue) {\n    if (searchValue.length > 100) {\n      const message = 'Search value may not exceed 100 characters.';\n      throw new Error(message);\n    }\n  }\n}\n\nexport const pixabayApi = new PixabayApi();\n","import { pixabayApi } from './js/pixabay-api';\n\nconst formRef = document.querySelector('.search-form');\nconst buttonRef = formRef.querySelector('.button');\n\nformRef.addEventListener('submit', handleSearchPhotos);\n\nlet disabledButton = false;\n\nfunction handleSearchPhotos(e) {\n  e.preventDefault();\n  if (disabledButton) return;\n\n  const searchValue = e.target.elements['search-value']?.value ?? '';\n\n  pixabayApi.fetchPhotos({\n    searchValue: searchValue.trim(),\n    startCallback: () => {\n      disabledButton = true;\n      buttonRef.setAttribute('disabled', '');\n    },\n    finallyCallback: () => {\n      disabledButton = false;\n      buttonRef.removeAttribute('disabled');\n    },\n  });\n}\n"],"names":["galleryRef","gallery","SimpleLightbox","renderGallery","data","getGalleryItemMarkup","largeImageURL","tags","webformatURL","likes","views","comments","downloads","progressBarRef","toggleProgressBar","show","notify","message","iziToast","VITE_API_KEY","PixabayApi","__privateAdd","_validateSearchValue","_API_URL","_BASE_SEARCH_PARAMS","searchValue","startCallback","finallyCallback","__privateMethod","validateSearchValue_fn","serachParams","__privateGet","res","_a","err","pixabayApi","formRef","buttonRef","handleSearchPhotos","disabledButton"],"mappings":"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"}